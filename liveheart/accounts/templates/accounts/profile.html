{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ü—Ä–æ—Ñ–∏–ª—å</title>
    <link rel="stylesheet" href="{% static 'accounts/css/base.css' %}">
    <link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
</head>
<body>

<div class="center-page">
    <div class="profile-wrapper">

        <div class="back-link">
            <a href="{% url 'accounts:dashboard' %}">‚Üê –ù–∞–∑–∞–¥</a>
        </div>

        <div class="card">
            <h1 style="margin: 0 auto;">–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h1>
        </div>

        <div class="card profile-card">
            <h2>–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            <p><strong>–ò–º—è:</strong> {{ user_obj.username }}</p>
            <p><strong>Email:</strong> {{ user_obj.email }}</p>
            <p><strong>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:</strong> {{ user_obj.date_joined }}</p>
            <p><strong>–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥:</strong> {{ user_obj.last_login }}</p>

            {% if messages %}
                {% for message in messages %}
                    <p class="message {{ message.tags }}">
                        {{ message }}
                    </p>
                {% endfor %}
            {% endif %}
        </div>

        <div class="card profile-card">
            <h2>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
            <div class="totp-status-container">
            {% if user.totp_device and user.totp_device.confirmed %}
                <div class="totp-success">
                    üîì Google Authenticator –≤–∫–ª—é—á–µ–Ω
                </div>
                <a href="{% url 'accounts:disable_totp' %}">
                    <button>–û—Ç–∫–ª—é—á–∏—Ç—å</button>
                </a>
            {% else %}
                <div class="totp-warning">
                    üîì Google Authenticator –≤—ã–∫–ª—é—á–µ–Ω
                </div>
                <a href="{% url 'accounts:totp_setup' %}">
                    <button>–í–∫–ª—é—á–∏—Ç—å</button>
                </a>
            {% endif %}
            </div>
            <hr>

            <h3>–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è</h3>

            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="action" value="change_password">

                <input type="password" name="old_password" placeholder="–°—Ç–∞—Ä—ã–π –ø–∞—Ä–æ–ª—å" required>
                <input type="password" name="new_password" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å" required>
                <input type="password" name="confirm_password" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å" required>

                <button type="submit">–°–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
            </form>
        </div>

    </div>
</div>

</body>
</html>