{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–û—Å–º–æ—Ç—Ä –ø–∞—Ü–∏–µ–Ω—Ç–∞</title>
    <script src="{% static 'patients/js/new_patient.js' %}" defer></script>
    <script src="{% static 'patients/js/miocardial_map.js' %}" defer></script>
    <link rel="stylesheet" href="{% static 'patients/css/new_patient.css' %}">

</head>
<body>
<div class="center-page">
<h2>–û—Å–º–æ—Ç—Ä –ø–∞—Ü–∏–µ–Ω—Ç–∞</h2>
<form method="post">
     {% csrf_token %}
    <!-- ===== –ì–†–£–ü–ü–ê 1: –û–ë–©–ò–ï –î–ê–ù–ù–´–ï ===== -->
    <div class="card">
    <fieldset class="form-group">
        <legend>–û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–§–ò–û</label>
            <input type="text" class="field-input" name="full_name">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–í–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç)</label>
            <input type="number" class="field-input" name="age">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è</label>
            <input type="datetime-local" class="field-input" name="exam_datetime">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–†–æ—Å—Ç (—Å–º)</label>
            <input type="number" id="height" class="field-input" name="height">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–í–µ—Å (–∫–≥)</label>
            <input type="number" id="weight" class="field-input" name="weight">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ò–ú–¢</label>
            <input type="text" id="bmi" class="field-input" readonly name="bmi">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ü–ª–æ—â–∞–¥—å –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏ —Ç–µ–ª–∞ (–º¬≤)</label>
            <input type="text" id="bsa" class="field-input" readonly name="bsa">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ß–°–° (—É–¥/–º–∏–Ω)</label>
            <input type="number" class="field-input" name="hr">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 2: –ê–û–†–¢–ê ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–ê–æ—Ä—Ç–∞</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–î–∏–∞–º–µ—Ç—Ä –∞–æ—Ä—Ç—ã (–º–º)</label>
            <input type="number" class="field-input" name="diametr_aorta">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–†–∞—Å–∫—Ä—ã—Ç–∏–µ –∞–æ—Ä—Ç–∞–ª—å–Ω–æ–≥–æ –∫–ª–∞–ø–∞–Ω–∞ (–º–º)</label>
            <input type="number" class="field-input" name="opening_aortic_valve">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 3: –ê–û–†–¢–ê–õ–¨–ù–´–ô –ö–õ–ê–ü–ê–ù ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–ê–æ—Ä—Ç–∞–ª—å–Ω—ã–π –∫–ª–∞–ø–∞–Ω</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ü–°–ö (–º/—Å)</label>
            <input type="number" step="0.01" class="field-input" name="psk">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç (–º–º —Ä—Ç. —Å—Ç.)</label>
            <input type="number" step="0.1" class="field-input" name="max_gradient">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–°—Ä–µ–¥–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç (–º–º —Ä—Ç. —Å—Ç.)</label>
            <input type="number" step="0.1" class="field-input" name="avr_gradient">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–†–µ–≥—É—Ä–≥–∏—Ç–∞—Ü–∏—è (—Å—Ç–µ–ø–µ–Ω—å)</label>
            <input type="number" value="0" min="0" max="4" class="field-input" name="regurgitaciya_1">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ü–ª–æ—â–∞–¥—å –æ—Ç–∫—Ä—ã—Ç–∏—è –ê–ö (—Å–º¬≤)</label>
            <input type="number" step="0.01" class="field-input" name="ploshad_open_clapana">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 4: –õ–ï–í–´–ô –ñ–ï–õ–£–î–û–ß–ï–ö ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–õ–µ–≤—ã–π –∂–µ–ª—É–¥–æ—á–µ–∫</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–ñ–ü (–º–º)</label>
            <input type="number" class="field-input" data-lv="ivsd" name="mjp">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ö–î–† (–º–º)</label>
            <input type="number" class="field-input" data-lv="edd" name="kdr">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ö–°–† (–º–º)</label>
            <input type="number" class="field-input" data-lv="esd" name="kcr">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ó–°–õ–ñ (–º–º)</label>
            <input type="number" class="field-input" data-lv="pw" name="zclj">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ö–î–û (–º–ª)</label>
            <input type="number" class="field-input" data-lv="edv" name="kdo">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ö–°–û (–º–ª)</label>
            <input type="number" class="field-input" data-lv="esv" name="kco">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ß–°–° (—É–¥/–º–∏–Ω)</label>
            <input type="number" class="field-input" data-lv="hr" name="hr">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–§–° (%)</label>
            <input type="number" class="field-input" readonly data-lv-calc="fs" name="fc">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–§–í (%)</label>
            <input type="number" class="field-input" readonly data-lv-calc="ef" name="fv">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–£–û (–º–ª)</label>
            <input type="number" class="field-input" readonly data-lv-calc="sv" name="uo">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–°–í (–ª/–º–∏–Ω)</label>
            <input type="number" class="field-input" readonly data-lv-calc="co" name="cv">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–°–ò (–ª/–º–∏–Ω/–º¬≤)</label>
            <input type="number" class="field-input" readonly data-lv-calc="ci" name="ci">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–û (–ª/–º–∏–Ω)</label>
            <input type="number" class="field-input" readonly data-lv-calc="mo" name="mo">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–ú–õ–ñ (–≥)</label>
            <input type="number" class="field-input" readonly data-lv-calc="lvm" name="mmlj">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ò–ú–ú–õ–ñ (–≥/–º¬≤)</label>
            <input type="number" class="field-input" readonly data-lv-calc="lvmi" name="immlj">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–û–¢–°</label>
            <input type="number" class="field-input" readonly data-lv-calc="rwt">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 5: –û–°–¢–ê–õ–¨–ù–´–ï –ö–ê–ú–ï–†–´ ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞–º–µ—Ä—ã</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–õ–µ–≤–æ–µ –ø—Ä–µ–¥—Å–µ—Ä–¥–∏–µ (–º–º)</label>
            <input type="number" class="field-input" data-oc="la" name="left_pred">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ü—Ä–∞–≤–æ–µ –ø—Ä–µ–¥—Å–µ—Ä–¥–∏–µ (–º–º)</label>
            <input type="number" class="field-input" data-oc="ra" name="right_pred">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ü—Ä–∞–≤—ã–π –∂–µ–ª—É–¥–æ—á–µ–∫ (–º–º)</label>
            <input type="number" class="field-input" data-oc="rv" name="right_jel">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–û–±—ä—ë–º –õ–ü (–º–ª)</label>
            <input type="number" class="field-input" data-oc="lav" name="obem_lp">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ò–Ω–¥–µ–∫—Å –æ–±—ä—ë–º–∞ –õ–ü (–º–ª/–º¬≤)</label>
            <input type="number" class="field-input" readonly data-oc-calc="lavi" name="index_obem_lp">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 6: –ú–ò–¢–†–ê–õ–¨–ù–´–ô –ö–õ–ê–ü–ê–ù ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–ú–∏—Ç—Ä–∞–ª—å–Ω—ã–π –∫–ª–∞–ø–∞–Ω</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>E (–º/—Å)</label>
            <input type="number" step="0.01" class="field-input" data-mv="e" name="e">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>A (–º/—Å)</label>
            <input type="number" step="0.01" class="field-input" data-mv="a" name="a">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>E/A</label>
            <input type="number" step="0.01" class="field-input" readonly data-mv-calc="ea" name="e/a">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–∞–∫—Å. –≥—Ä–∞–¥–∏–µ–Ω—Ç (–º–º —Ä—Ç. —Å—Ç.)</label>
            <input type="number" step="0.1" class="field-input" data-mv="grad_max" name="max_gradient">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>DTe (–º—Å)</label>
            <input type="number" class="field-input" data-mv="dte" name="dte">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>IVRT (–º—Å)</label>
            <input type="number" class="field-input" data-mv="ivrt" name="ivrt">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–†–µ–≥—É—Ä–≥–∏—Ç–∞—Ü–∏—è</label>
            <input type="number" class="field-input" value="0" min="0" data-mv="reg" name="regurgitaciya_2">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 7: –¢–†–ò–ö–£–°–ü–ò–î–ê–õ–¨–ù–´–ô –ö–õ–ê–ü–ê–ù ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–¢—Ä–∏–∫—É—Å–ø–∏–¥–∞–ª—å–Ω—ã–π –∫–ª–∞–ø–∞–Ω</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>E (–º/—Å)</label>
            <input type="number" step="0.01" class="field-input" data-tv="e" name="trikuspid_e">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>A (–º/—Å)</label>
            <input type="number" step="0.01" class="field-input" data-tv="a" name="trikuspid_a">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>E/A</label>
            <input type="number" step="0.01" class="field-input" readonly data-tv-calc="ea" name="trikuspid_e/a">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–∞–∫—Å. –≥—Ä–∞–¥–∏–µ–Ω—Ç (–º–º —Ä—Ç. —Å—Ç.)</label>
            <input type="number" step="0.1" class="field-input" data-tv="grad_max" name="trikuspid_max_gradiend">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>TAPSE (–º–º)</label>
            <input type="number" step="0.1" class="field-input" data-tv="tapse" name="tapse">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–†–µ–≥—É—Ä–≥–∏—Ç–∞—Ü–∏—è</label>
            <input type="number" class="field-input" value="0" min="0" data-tv="reg" name="regurgitaciya_3">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 8: –õ–Å–ì–û–ß–ù–ê–Ø –ê–†–¢–ï–†–ò–Ø ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
        <legend><input type="checkbox" checked class="group-toggle">–õ—ë–≥–æ—á–Ω–∞—è –∞—Ä—Ç–µ—Ä–∏—è</legend>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–î–∏–∞–º–µ—Ç—Ä —Å—Ç–≤–æ–ª–∞ –õ–ê (–º–º)</label>
            <input type="number" class="field-input" data-pa="diameter" name="diametr_stvola_la">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ú–∞–∫—Å. –≥—Ä–∞–¥–∏–µ–Ω—Ç (–º–º —Ä—Ç. —Å—Ç.)</label>
            <input type="number" step="0.1" class="field-input" data-pa="grad_max" name="max_gradient">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–°–∫–æ—Ä–æ—Å—Ç—å (–º/—Å)</label>
            <input type="number" step="0.01" class="field-input" data-pa="velocity" name="speed">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>AT (–º—Å)</label>
            <input type="number" class="field-input" data-pa="at" name="at">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>ET (–º—Å)</label>
            <input type="number" class="field-input" data-pa="et" name="et">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>AT / ET</label>
            <input type="number" step="0.01" class="field-input" readonly data-pa-calc="ratio" name="at/et">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–°—Ä–î–õ–ê (–º–º —Ä—Ç. —Å—Ç.)</label>
            <input type="number" class="field-input" readonly data-pa-calc="mpap" name="srdla">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–†–µ–≥—É—Ä–≥–∏—Ç–∞—Ü–∏—è</label>
            <input type="number" value="0" min="0" class="field-input" data-pa="reg" name="regurgitaciya_4">
        </div>
        <div class="field">
            <input type="checkbox" checked class="field-toggle">
            <label>–ù–ü–í (–º–º)</label>
            <input type="number" class="field-input" data-pa="ivc" name="npv">
        </div>
    </fieldset>
    </div>


    <!-- ===== –ì–†–£–ü–ü–ê 9: –°–û–ö–†–ê–¢–ò–ú–û–°–¢–¨ –ú–ò–û–ö–ê–†–î–ê ===== -->
    <div class="card">
    <fieldset class="form-group" data-group>
    <legend><input type="checkbox" checked class="group-toggle">–°–æ–∫—Ä–∞—Ç–∏—Ç–µ–ª—å–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –º–∏–æ–∫–∞—Ä–¥–∞</legend>
    <div class="bullseye-wrapper">
       <svg viewBox="0 0 400 400" id="bullseye-svg">
            <g transform="translate(200,200)">
                <path class="segment" data-segment="1" d="M0,-180 A180,180 0 0,1 155.88,-90 L103.92,-60 A120,120 0 0,0 0,-120 Z"/>
                <path class="segment" data-segment="2" d="M155.88,-90 A180,180 0 0,1 155.88,90 L103.92,60 A120,120 0 0,0 103.92,-60 Z"/>
                <path class="segment" data-segment="3" d="M155.88,90 A180,180 0 0,1 0,180 L0,120 A120,120 0 0,0 103.92,60 Z"/>
                <path class="segment" data-segment="4" d="M0,180 A180,180 0 0,1 -155.88,90 L-103.92,60 A120,120 0 0,0 0,120 Z"/>
                <path class="segment" data-segment="5" d="M-155.88,90 A180,180 0 0,1 -155.88,-90 L-103.92,-60 A120,120 0 0,0 -103.92,60 Z"/>
                <path class="segment" data-segment="6" d="M-155.88,-90 A180,180 0 0,1 0,-180 L0,-120 A120,120 0 0,0 -103.92,-60 Z"/>
                <path class="segment" data-segment="7" d="M0,-120 A120,120 0 0,1 103.92,-60 L51.96,-30 A60,60 0 0,0 0,-60 Z"/>
                <path class="segment" data-segment="8" d="M103.92,-60 A120,120 0 0,1 103.92,60 L51.96,30 A60,60 0 0,0 51.96,-30 Z"/>
                <path class="segment" data-segment="9" d="M103.92,60 A120,120 0 0,1 0,120 L0,60 A60,60 0 0,0 51.96,30 Z"/>
                <path class="segment" data-segment="10" d="M0,120 A120,120 0 0,1 -103.92,60 L-51.96,30 A60,60 0 0,0 0,60 Z"/>
                <path class="segment" data-segment="11" d="M-103.92,60 A120,120 0 0,1 -103.92,-60 L-51.96,-30 A60,60 0 0,0 -51.96,30 Z"/>
                <path class="segment" data-segment="12" d="M-103.92,-60 A120,120 0 0,1 0,-120 L0,-60 A60,60 0 0,0 -51.96,-30 Z"/>
                <path class="segment" data-segment="13" d="M0,-60 A60,60 0 0,1 60,0 L30,0 A30,30 0 0,0 0,-30 Z"/>
                <path class="segment" data-segment="14" d="M60,0 A60,60 0 0,1 0,60 L0,30 A30,30 0 0,0 30,0 Z"/>
                <path class="segment" data-segment="15" d="M0,60 A60,60 0 0,1 -60,0 L-30,0 A30,30 0 0,0 0,30 Z"/>
                <path class="segment" data-segment="16" d="M-60,0 A60,60 0 0,1 0,-60 L0,-30 A30,30 0 0,0 -30,0 Z"/>
                <circle class="segment" data-segment="17" cx="0" cy="0" r="30"/>
                <g font-size="16" font-weight="bold" text-anchor="middle" dominant-baseline="middle" fill="black">
                    <text x="75" y="-130">1</text>
                    <text x="150" y="0">2</text>
                    <text x="75" y="130">3</text>
                    <text x="-75" y="130">4</text>
                    <text x="-150" y="0">5</text>
                    <text x="-75" y="-130">6</text>
                    <text x="45" y="-78">7</text>
                    <text x="90" y="0">8</text>
                    <text x="45" y="78">9</text>
                    <text x="-45" y="78">10</text>
                    <text x="-90" y="0">11</text>
                    <text x="-45" y="-78">12</text>
                    <text x="32" y="-32">13</text>
                    <text x="32" y="32">14</text>
                    <text x="-32" y="32">15</text>
                    <text x="-32" y="-32">16</text>
                    <text x="0" y="0">17</text>
                </g>
            </g>
        </svg>
    </div>
    <div style="display:none;">
        {% for i in segments %}
            <input type="hidden" name="segment_{{ i }}" id="input_segment_{{ i }}" value="0">
        {% endfor %}
    </div>
    <div class="legend-bullseye">
        <span class="l-item"><i style="background:#fff; border:1px solid #000"></i> –ù–æ—Ä–º–∞</span>
        <span class="l-item"><i style="background:#ffd700"></i> –ì–∏–ø–æ–∫–∏–Ω–µ–∑</span>
        <span class="l-item"><i style="background:#ff9800"></i> –ê–∫–∏–Ω–µ–∑</span>
        <span class="l-item"><i style="background:#f44336"></i> –î–∏—Å–∫–∏–Ω–µ–∑</span>
    </div>
    <div class="segment-footnote">
    <h4>–ù—É–º–µ—Ä–∞—Ü–∏—è —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (AHA 17-—Å–µ–≥–º–µ–Ω—Ç–Ω–∞—è –º–æ–¥–µ–ª—å)</h4>

    <div class="footnote-grid">
        <div><strong>1</strong> ‚Äî –ë–∞–∑–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–¥–Ω–∏–π</div>
        <div><strong>2</strong> ‚Äî –ë–∞–∑–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–¥–Ω–µ-–±–æ–∫–æ–≤–æ–π</div>
        <div><strong>3</strong> ‚Äî –ë–∞–∑–∞–ª—å–Ω—ã–π –Ω–∏–∂–Ω–µ-–±–æ–∫–æ–≤–æ–π</div>
        <div><strong>4</strong> ‚Äî –ë–∞–∑–∞–ª—å–Ω—ã–π –Ω–∏–∂–Ω–∏–π</div>
        <div><strong>5</strong> ‚Äî –ë–∞–∑–∞–ª—å–Ω—ã–π –Ω–∏–∂–Ω–µ-–ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ—á–Ω—ã–π</div>
        <div><strong>6</strong> ‚Äî –ë–∞–∑–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–¥–Ω–µ-–ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ—á–Ω—ã–π</div>
        <div><strong>7</strong> ‚Äî –°—Ä–µ–¥–Ω–∏–π –ø–µ—Ä–µ–¥–Ω–∏–π</div>
        <div><strong>8</strong> ‚Äî –°—Ä–µ–¥–Ω–∏–π –ø–µ—Ä–µ–¥–Ω–µ-–±–æ–∫–æ–≤–æ–π</div>
        <div><strong>9</strong> ‚Äî –°—Ä–µ–¥–Ω–∏–π –Ω–∏–∂–Ω–µ-–±–æ–∫–æ–≤–æ–π</div>
        <div><strong>10</strong> ‚Äî –°—Ä–µ–¥–Ω–∏–π –Ω–∏–∂–Ω–∏–π</div>
        <div><strong>11</strong> ‚Äî –°—Ä–µ–¥–Ω–∏–π –Ω–∏–∂–Ω–µ-–ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ—á–Ω—ã–π</div>
        <div><strong>12</strong> ‚Äî –°—Ä–µ–¥–Ω–∏–π –ø–µ—Ä–µ–¥–Ω–µ-–ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ—á–Ω—ã–π</div>
        <div><strong>13</strong> ‚Äî –ê–ø–∏–∫–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–¥–Ω–∏–π</div>
        <div><strong>14</strong> ‚Äî –ê–ø–∏–∫–∞–ª—å–Ω—ã–π –±–æ–∫–æ–≤–æ–π</div>
        <div><strong>15</strong> ‚Äî –ê–ø–∏–∫–∞–ª—å–Ω—ã–π –Ω–∏–∂–Ω–∏–π</div>
        <div><strong>16</strong> ‚Äî –ê–ø–∏–∫–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≥–æ—Ä–æ–¥–æ—á–Ω—ã–π</div>
        <div><strong>17</strong> ‚Äî –í–µ—Ä—Ö—É—à–∫–∞ (–∞–ø–µ–∫—Å)</div>
    </div>
    </div>
    </fieldset>
    </div>
    <input type="hidden" name="export_type" id="export_type_input" value="">

<div class="form-actions" style="margin-top: 20px; display: flex; gap: 10px;">
    <button type="button" onclick="submitFormNormal()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è</button>
    <button type="button" onclick="openExportModal()" class="btn-primary">–≠–∫—Å–ø–æ—Ä—Ç</button>
</div>

<div id="exportModal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
        <h3>–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –æ—Ç—á–µ—Ç–∞</h3>
        <p>–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>
        <div class="export-buttons">
            <button type="button" onclick="doExport('docx')" class="btn-exp word">üìÑ Word (.docx)</button>
            <button type="button" onclick="doExport('pdf')" class="btn-exp pdf">üìï PDF (.pdf)</button>
            <button type="button" onclick="doExport('xlsx')" class="btn-exp excel">üìä Excel (.xlsx)</button>
        </div>
        <button type="button" onclick="closeExportModal()" class="btn-close">–û—Ç–º–µ–Ω–∞</button>
    </div>
</div>

<script>
    const modal = document.getElementById('exportModal');
    const hiddenInput = document.getElementById('export_type_input');
    const form = document.querySelector('form');

    function openExportModal() {
        modal.style.display = 'flex';
    }

    function closeExportModal() {
        modal.style.display = 'none';
    }

    function submitFormNormal() {
        hiddenInput.value = ''; // –û—á–∏—â–∞–µ–º —Ç–∏–ø —ç–∫—Å–ø–æ—Ä—Ç–∞
        form.submit();
    }

    function doExport(type) {
        hiddenInput.value = type; // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º docx/pdf/xlsx
        form.submit();            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ñ–æ—Ä–º—É
        closeExportModal();       // –ó–∞–∫—Ä—ã–≤–∞–µ–º –æ–∫–Ω–æ (—Ñ–∞–π–ª –Ω–∞—á–Ω–µ—Ç –∫–∞—á–∞—Ç—å—Å—è)
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –æ–∫–Ω–∞
    window.onclick = function(event) {
        if (event.target == modal) {
            closeExportModal();
        }
    }
</script>
</form>
</div>
</body>
</html>